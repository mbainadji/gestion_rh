{% extends 'employees/base.html' %}

{% block title %}Gestion de la paie{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>Fiches de Paie et Rémunération</h2>
        <a href="{% url 'employees:paie_create' %}" class="btn">Générer une fiche de paie</a>
    </div>
    <table>
        <thead>
            <tr>
                <th>Employé</th>
                <th>Mois/Année</th>
                <th>Salaire Base</th>
                <th>Primes</th>
                <th>Net à Payer</th>
                <th>Fiche PDF</th>
            </tr>
        </thead>
        <tbody>
            {% for fiche in fiches %}
            <tr>
                <td>{{ fiche.employe }}</td>
                <td>{{ fiche.mois }}/{{ fiche.annee }}</td>
                <td>{{ fiche.salaire_base }} €</td>
                <td>{{ fiche.primes }} €</td>
                <td><strong>{{ fiche.net_a_payer }} €</strong></td>
                <td>
                    {% if fiche.fichier_pdf %}
                    <a href="{{ fiche.fichier_pdf.url }}" target="_blank">Télécharger</a>
                    {% else %}
                    Non générée
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6">Aucune fiche de paie trouvée.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
